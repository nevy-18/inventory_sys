<div class="section-header">
    <h2>Inventory Smart Report</h2>
</div>

<h3>Restock Priority (Hybrid Sorted)</h3>
<table>
    <thead>
        <tr>
            <th>Category</th>
            <th>Item</th>
            <th>Stock</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for product in products %}
        <tr>
            <td>{{ product.category }}</td>
            <td>{{ product.name }}</td>
            <td>{{ product.stock }}</td>
            <td>
                {% if product.stock < 5 %}
                <span style="color: red; font-weight: bold;">RESTOCK</span>
                {% else %}
                <span style="color: green;">OK</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<hr style="margin: 40px 0;">

<h3>Sales History</h3>
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Item Name</th>
            <th>Qty</th>
            <th>Total Amount</th>
            <th>Assigned To</th>
        </tr>
    </thead>
    <tbody>
        {% for sale in sales %}
        <tr>
            <td>{{ sale.date_sold.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ sale.product_name }}</td>
            <td>{{ sale.quantity }}</td>
            <td>â‚±{{ "%.2f"|format(sale.total_price) }}</td>
            <td><strong>{{ sale.assigned_to }}</strong></td>
        </tr>
        {% else %}
        <tr><td colspan="5" style="text-align:center;">No sales recorded yet.</td></tr>
        {% endfor %}
    </tbody>
</table>