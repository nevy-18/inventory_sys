<style>
    table { width: 100%; border-collapse: collapse; text-align: center; }
    th, td { padding: 12px; border-bottom: 1px solid #eee; }
    .text-danger { color: #e74c3c !important; font-weight: bold; }
    
  
    #addProductForm input, .qty-input { 
        text-align: left; 
        width: 100%; 
        padding: 10px; 
        margin-bottom: 12px; 
        border-radius: 6px; 
        border: 1px solid #ddd;
        box-sizing: border-box;
    }
    
    .modal-content { text-align: center; background: white; width: 350px; margin: 10% auto; padding: 30px; border-radius: 12px; }
    .btn-sell { background: #f39c12; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; }
</style>

<div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>Inventory</h2>
    <button onclick="openModal()" style="background:#2ecc71; color:white; border:none; padding:10px; border-radius:6px; cursor:pointer;">+ Add Item</button>
</div>

<table>
    <thead>
        <tr><th>Item</th><th>Category</th><th>Size</th><th>Stock</th><th>Price</th><th>Action</th></tr>
    </thead>
    <tbody>
        {% for product in products %}
        <tr>
            <td>{{ product.name }}</td>
            <td>{{ product.category }}</td>
            <td>{{ product.size }}</td>
            <td class="{{ 'text-danger' if product.stock < 5 else '' }}">{{ product.stock }}</td>
            <td>â‚±{{ "%.2f"|format(product.price) }}</td>
            <td>
                <div style="display: flex; gap: 5px; justify-content: center;">
                    <input type="number" id="qty-{{ product.id }}" value="1" min="1" class="qty-input" style="width: 50px;">
                    <button onclick="sellItem({{ product.id }}, '{{ product.category }}', '{{ product.name }}', '{{ product.size }}')" class="btn-sell">Sell</button>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div id="productModal" class="modal" style="display:none; position:fixed; z-index:100; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.6);">
    <div class="modal-content">
        <h3>New Entry</h3>
        <form id="addProductForm">
            <input type="text" name="name" placeholder="Item Name" required>
            <input type="text" name="category" placeholder="Category (Type 'Uniform' for size)" required>
            <input type="number" name="stock" placeholder="Initial Stock" required>
            <input type="number" step="0.01" name="price" placeholder="Price" required>
            <button type="submit" style="width: 100%; padding: 12px; background: #3498db; color: white; border: none; border-radius: 6px;">Save Product</button>
            <button type="button" onclick="closeModal()" style="margin-top: 10px; border: none; background: none; color: gray;">Cancel</button>
        </form>
    </div>
</div>